location:
  source_directories: {{ vars.location.source_directories|yaml }}
  repositories: {{ vars.location.repositories|yaml }}
  exclude_patterns: {{ vars.location.exclude_patterns|yaml }}
  exclude_caches: {{ vars.location.exclude_caches|yaml_encode }}
  local_path: {{ borg_bin|yaml_dquote }}

storage:
  encryption_passcommand: {{ ['cat', passphrase_path]|map('quote')|join(' ')|yaml_dquote }}
  compression: {{ vars.storage.compression|yaml_dquote }}
  ssh_command: {{ [
      'ssh',
      '-i', ssh_keyfile_path,
      '-o', 'StrictHostKeyChecking=yes',
      '-o', 'UserKnownHostsFile=' ~ ssh_hosts_path,
    ]|map('quote')|join(' ')|yaml_dquote }}
  archive_name_format: {{ vars.storage.archive_name_format|yaml_dquote }}

retention:
  keep_daily: {{ vars.retention.keep_daily|yaml_encode }}
  keep_weekly: {{ vars.retention.keep_weekly|yaml_encode }}
  keep_monthly: {{ vars.retention.keep_monthly|yaml_encode }}
  prefix: {{ vars.retention.prefix|yaml_dquote }}

consistency:
  checks: {{ vars.consistency.checks|yaml }}
  check_last: {{ vars.consistency.check_last|yaml_encode }}
  prefix: {{ vars.consistency.prefix|yaml_dquote }}

hooks:
  before_backup: {{ vars.hooks.before_backup|yaml }}
  after_backup: {{ vars.hooks.after_backup|yaml }}
  on_error: {{ vars.hooks.on_error|yaml }}
