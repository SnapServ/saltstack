nginx:
  managed: False

  worker_processes: 'auto'
  worker_connections: 1024
  global_config_includes: []
  http_config_includes: []

  custom_configs: {}
  upstreams: {}
  vhosts: {}

  vhost_defaults:
    default: False
    http_port: 80
    https_port: 443

    ssl_enabled: False
    ssl_forced: True
    server_names: []

    app_user: null
    app_group: null
    index_files: []
    custom_configs: {}

    headers:
      Content-Security-Policy: >-
        default-src https:;
        img-src https: data:;
        script-src https: 'unsafe-inline' 'unsafe-eval';
        style-src https: 'unsafe-inline';
        report-uri https://snapserv.report-uri.com/r/d/csp/enforce
      Expect-CT: 'max-age=0, report-uri="https://snapserv.report-uri.com/r/d/ct/reportOnly"'
      Feature-Policy: >-
        accelerometer 'none';
        ambient-light-sensor 'none';
        autoplay 'self';
        camera 'none';
        encrypted-media 'none';
        fullscreen 'self';
        geolocation 'none';
        gyroscope 'none';
        magnetometer 'none';
        microphone 'none';
        midi 'none';
        payment 'none';
        picture-in-picture *;
        speaker 'none';
        sync-xhr 'none';
        usb 'none'
      Referrer-Policy: 'no-referrer-when-downgrade'
      Strict-Transport-Security: 'max-age=31536000; includeSubDomains; preload'
      X-Content-Type-Options: 'nosniff'
      X-Frame-Options: 'sameorigin'
      X-XSS-Protection: '1; mode=block'
    redirect_headers:
      - 'Strict-Transport-Security'

    security:
      enforce_http_only_cookies: true
      enforce_secure_cookies: true

    php_fpm_version: null
    php_fpm_pool: null

  <os_family>:
    Debian:
      packages: ['nginx-full']
      service: 'nginx'
      service_user: 'www-data'
      service_group: 'www-data'

      config_path: '/etc/nginx/nginx.conf'
      config_check_cmd: '/usr/sbin/nginx -t -c'
      fastcgi_config_path: '/etc/nginx/fastcgi.conf'
      pidfile_path: '/run/nginx.pid'

      global_config_includes:
        - '/etc/nginx/modules-enabled/*.conf'
      http_config_includes:
        - '/etc/nginx/conf.d/*.conf'
        - '/etc/nginx/sites-enabled/*'
      
      certs_dir: '/etc/nginx/certs'
      vhosts_dir: '/etc/nginx/sites-saltstack'
      vhost_data_dir: '/srv/www'
      global_access_log_path: '/var/log/nginx/access.log'
      global_error_log_path: '/var/log/nginx/error.log'
      php_fpm_socket_path_fmt: '/run/php/php{version:s}-fpm-{pool:s}.sock'
      
